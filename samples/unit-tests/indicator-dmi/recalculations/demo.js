QUnit.skip('Test DMI calculations on data updates.', function (assert) {
    const chart = Highcharts.stockChart('container', {
        yAxis: [{
            height: '60%'
        }, {
            height: '40%',
            top: '60%'
        }],
        series: [
            {
                id: 'main',
                type: 'candlestick',
                data: [
                    [1552311000000, 43.87, 44.78, 43.84, 44.72],
                    [1552397400000, 45.00, 45.67, 44.84, 45.23],
                    [1552483800000, 45.56, 45.83, 45.23, 45.43],
                    [1552570200000, 45.97, 46.03, 45.64, 45.93],
                    [1552656600000, 46.21, 46.83, 45.94, 46.53],
                    [1552915800000, 46.45, 47.1, 46.45, 47.01],
                    [1553002200000, 47.09, 47.25, 46.48, 46.63],
                    [1553088600000, 46.56, 47.37, 46.18, 47.04],
                    [1553175000000, 47.51, 49.08, 47.45, 48.77],
                    [1553261400000, 48.83, 49.42, 47.69, 47.76],
                    [1553520600000, 47.88, 47.99, 46.65, 47.19],
                    [1553607000000, 47.92, 48.22, 46.15, 46.7],
                    [1553693400000, 47.19, 47.44, 46.64, 47.12],
                    [1553779800000, 47.24, 47.39, 46.88, 47.18],
                    [1553866200000, 47.46, 47.52, 47.13, 47.49],
                    [1554125400000, 47.91, 47.92, 47.1, 47.81],
                    [1554211800000, 47.77, 48.62, 47.76, 48.51],
                    [1554298200000, 48.31, 49.13, 48.29, 48.84],
                    [1554384600000, 48.7, 49.09, 48.28, 48.92],
                    [1554471000000, 49.11, 49.28, 48.98, 49.25],
                    [1554730200000, 49.1, 50.06, 49.08, 50.03],
                    [1554816600000, 50.08, 50.71, 49.81, 49.88],
                    [1554903000000, 49.67, 50.19, 49.54, 50.15],
                    [1554989400000, 50.21, 50.25, 49.61, 49.74],
                    [1555075800000, 49.8, 50.03, 49.05, 49.72]
                ]
            }, {
                type: 'dmi',
                yAxis: 1
            }
        ]
    });

    // DMI needs at least 15 points to calculate the default period: 14.
    assert.strictEqual(
        chart.series[0].points.length,
        chart.series[1].points.length + chart.series[1].options.params.period,
        `The sum of the DMI indicator length and period
        should equal the length of the main series.`
    );

    chart.series[0].addPoint([1555335000000, 49.65, 49.96, 49.5, 49.81]);

    assert.strictEqual(
        chart.series[0].points.length,
        chart.series[1].points.length + chart.series[1].options.params.period,
        'After addPoint number of DMI should be recalculated.'
    );

    assert.deepEqual(
        chart.series[1].yData,
        [
            [23.03988996, 22.62723521, 0.9036144578],
            [24.4140625, 21.41927083, 6.534090909],
            [27.73595558, 20.12327091, 15.90640975],
            [26.41906767, 22.4466354, 8.129285015],
            [24.86086829, 21.37752579, 7.533441793],
            [24.09989023, 25.76399561, 3.337295822],
            [27.96124658, 24.27534957, 7.056158491],
            [26.41429604, 27.8794299, 2.698532527],
            [25.02274851, 26.79692544, 3.423751614],
            [23.69527344, 25.94049701, 4.52339825],
            [21.82762206, 23.93956323, 4.61453147],
            [20.89507709, 26.48031393, 11.78932084]
        ],
        'Correct values'
    );
});
