QUnit.skip('Test DMI calculations on data updates.', function (assert) {
    const chart = Highcharts.stockChart('container', {
        yAxis: [{
            height: '60%'
        }, {
            height: '40%',
            top: '60%'
        }],
        series: [
            {
                id: 'main',
                type: 'candlestick',
                data: [
                    [1552311000000, 43.87, 44.78, 43.84, 44.72],
                    [1552397400000, 45.00, 45.67, 44.84, 45.23],
                    [1552483800000, 45.56, 45.83, 45.23, 45.43],
                    [1552570200000, 45.97, 46.03, 45.64, 45.93],
                    [1552656600000, 46.21, 46.83, 45.94, 46.53],
                    [1552915800000, 46.45, 47.1, 46.45, 47.01],
                    [1553002200000, 47.09, 47.25, 46.48, 46.63],
                    [1553088600000, 46.56, 47.37, 46.18, 47.04],
                    [1553175000000, 47.51, 49.08, 47.45, 48.77],
                    [1553261400000, 48.83, 49.42, 47.69, 47.76],
                    [1553520600000, 47.88, 47.99, 46.65, 47.19],
                    [1553607000000, 47.92, 48.22, 46.15, 46.7],
                    [1553693400000, 47.19, 47.44, 46.64, 47.12],
                    [1553779800000, 47.24, 47.39, 46.88, 47.18],
                    [1553866200000, 47.46, 47.52, 47.13, 47.49],
                    [1554125400000, 47.91, 47.92, 47.1, 47.81],
                    [1554211800000, 47.77, 48.62, 47.76, 48.51],
                    [1554298200000, 48.31, 49.13, 48.29, 48.84],
                    [1554384600000, 48.7, 49.09, 48.28, 48.92],
                    [1554471000000, 49.11, 49.28, 48.98, 49.25],
                    [1554730200000, 49.1, 50.06, 49.08, 50.03],
                    [1554816600000, 50.08, 50.71, 49.81, 49.88],
                    [1554903000000, 49.67, 50.19, 49.54, 50.15],
                    [1554989400000, 50.21, 50.25, 49.61, 49.74],
                    [1555075800000, 49.8, 50.03, 49.05, 49.72]
                ]
            }, {
                type: 'dmi',
                yAxis: 1
            }
        ]
    });

    // DMI needs at least 15 points to calculate the default period: 14.
    assert.strictEqual(
        chart.series[0].points.length,
        chart.series[1].points.length + chart.series[1].options.params.period,
        `The sum of the DMI indicator length and period
        should equal the length of the main series.`
    );

    chart.series[0].addPoint([1555335000000, 49.65, 49.96, 49.5, 49.81]);

    assert.strictEqual(
        chart.series[0].points.length,
        chart.series[1].points.length + chart.series[1].options.params.period,
        'After addPoint number of DMI should be recalculated.'
    );

    assert.deepEqual(
        chart.series[1].yData,
        [
            23.03988996, 22.62723521, 0.9036144578,
            24.51371571, 21.33167082, 6.940818103,
            27.96876464, 20.03596319, 16.52504204,
            26.28909708, 22.62189317, 7.497709403,
            24.74582533, 21.29390048, 7.497709403,
            24.06952981, 26.02604966, 3.905573844,
            28.18802137, 24.09550909, 7.827536207,
            26.2614277, 27.99240899, 3.190523271,
            24.93584985, 26.57945772, 3.190523271,
            23.66901945, 25.7847903, 4.278276761,
            21.83938049, 23.79160013, 4.278276761,
            21.01809359, 26.57572462, 11.67721195
        ],
        'Correct values'
    );
});
